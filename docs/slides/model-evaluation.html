<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.32">

  <meta name="author" content="Katie Schuler">
  <title>DataScience – Model Evaluation</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-f563837468303362081e247dddd440d0.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Model Evaluation</h1>
  <p class="subtitle">Data Science for Studying Language and the Mind</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Katie Schuler 
</div>
</div>
</div>

</section>
<section id="install-tidymodels" class="slide level2">
<h2>Install tidymodels!</h2>
<p>It takes 9 minutes!</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="fu">install.packages</span>(<span class="st">'tidymodels'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="you-are-not-alone" class="slide level2">
<h2>You are not alone</h2>

<img data-src="../assests/images/Rlearning.png" class="r-stretch quarto-figure-center"><p class="caption">by Allison Horst</p></section>
<section id="you-are-here" class="slide level2 smaller">
<h2>You are <code>here</code></h2>
<div class="columns">
<div class="column" style="width:33%;">
<h5 id="data-science-with-r">Data science with R</h5>
<ul>
<li>Hello, world!</li>
<li>R basics</li>
<li>Data visualization</li>
<li>Data wrangling</li>
</ul>
</div><div class="column" style="width:33%;">
<h5 id="stats-model-buidling">Stats &amp; Model buidling</h5>
<ul>
<li>Sampling distribution</li>
<li>Hypothesis testing</li>
<li>Model specification</li>
<li>Model fitting</li>
<li><code>Model accuracy</code></li>
<li>Model reliability</li>
</ul>
</div><div class="column" style="width:33%;">
<h5 id="more-advanced">More advanced</h5>
<ul>
<li>Classification</li>
<li>Inference for regression</li>
<li>Mixed-effect models</li>
</ul>
</div></div>
</section>
<section id="model-building-overview" class="slide level2 smaller">
<h2>Model building overview</h2>
<ul>
<li class="fragment"><strong>Model specification</strong>: what is the form?</li>
<li class="fragment"><strong>Model fitting</strong>: you have the form, how do you guess the free parameters?</li>
<li class="fragment"><strong>Model accuracy</strong>: you’ve estimated the parameters, how well does that model describe your data?</li>
<li class="fragment"><strong>Model reliability</strong>: when you estimate the parameters, there is some uncertainty on them</li>
</ul>
</section>
<section id="dataset" class="slide level2 smaller">
<h2>Dataset</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a><span class="fu">library</span>(languageR)</span>
<span id="cb2-2"><a></a><span class="fu">glimpse</span>(english)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 4,568
Columns: 36
$ RTlexdec                        &lt;dbl&gt; 6.543754, 6.397596, 6.304942, 6.424221…
$ RTnaming                        &lt;dbl&gt; 6.145044, 6.246882, 6.143756, 6.131878…
$ Familiarity                     &lt;dbl&gt; 2.37, 4.43, 5.60, 3.87, 3.93, 3.27, 3.…
$ Word                            &lt;fct&gt; doe, whore, stress, pork, plug, prop, …
$ AgeSubject                      &lt;fct&gt; young, young, young, young, young, you…
$ WordCategory                    &lt;fct&gt; N, N, N, N, N, N, N, N, N, N, N, N, N,…
$ WrittenFrequency                &lt;dbl&gt; 3.9120230, 4.5217886, 6.5057841, 5.017…
$ WrittenSpokenFrequencyRatio     &lt;dbl&gt; 1.02165125, 0.35048297, 2.08935600, -0…
$ FamilySize                      &lt;dbl&gt; 1.3862944, 1.3862944, 1.6094379, 1.945…
$ DerivationalEntropy             &lt;dbl&gt; 0.14144, 0.42706, 0.06197, 0.43035, 0.…
$ InflectionalEntropy             &lt;dbl&gt; 0.02114, 0.94198, 1.44339, 0.00000, 1.…
$ NumberSimplexSynsets            &lt;dbl&gt; 0.6931472, 1.0986123, 2.4849066, 1.098…
$ NumberComplexSynsets            &lt;dbl&gt; 0.000000, 0.000000, 1.945910, 2.639057…
$ LengthInLetters                 &lt;int&gt; 3, 5, 6, 4, 4, 4, 4, 3, 3, 5, 5, 3, 5,…
$ Ncount                          &lt;int&gt; 8, 5, 0, 8, 3, 9, 6, 13, 3, 3, 1, 9, 1…
$ MeanBigramFrequency             &lt;dbl&gt; 7.036333, 9.537878, 9.883931, 8.309180…
$ FrequencyInitialDiphone         &lt;dbl&gt; 12.02268, 12.59780, 13.30069, 12.07807…
$ ConspelV                        &lt;int&gt; 10, 20, 10, 5, 17, 19, 10, 13, 1, 7, 1…
$ ConspelN                        &lt;dbl&gt; 3.737670, 7.870930, 6.693324, 6.677083…
$ ConphonV                        &lt;int&gt; 41, 38, 13, 6, 17, 21, 13, 7, 11, 14, …
$ ConphonN                        &lt;dbl&gt; 8.837826, 9.775825, 7.040536, 3.828641…
$ ConfriendsV                     &lt;int&gt; 8, 20, 10, 4, 17, 19, 10, 6, 0, 7, 14,…
$ ConfriendsN                     &lt;dbl&gt; 3.295837, 7.870930, 6.693324, 3.526361…
$ ConffV                          &lt;dbl&gt; 0.6931472, 0.0000000, 0.0000000, 0.693…
$ ConffN                          &lt;dbl&gt; 2.7080502, 0.0000000, 0.0000000, 6.634…
$ ConfbV                          &lt;dbl&gt; 3.4965076, 2.9444390, 1.3862944, 1.098…
$ ConfbN                          &lt;dbl&gt; 8.833900, 9.614738, 5.817111, 2.564949…
$ NounFrequency                   &lt;int&gt; 49, 142, 565, 150, 170, 125, 582, 2061…
$ VerbFrequency                   &lt;int&gt; 0, 0, 473, 0, 120, 280, 110, 76, 4, 86…
$ CV                              &lt;fct&gt; C, C, C, C, C, C, C, C, V, C, C, V, C,…
$ Obstruent                       &lt;fct&gt; obst, obst, obst, obst, obst, obst, ob…
$ Frication                       &lt;fct&gt; burst, frication, frication, burst, bu…
$ Voice                           &lt;fct&gt; voiced, voiceless, voiceless, voiceles…
$ FrequencyInitialDiphoneWord     &lt;dbl&gt; 10.129308, 9.054388, 12.422026, 10.048…
$ FrequencyInitialDiphoneSyllable &lt;dbl&gt; 10.409763, 9.148252, 13.127395, 11.003…
$ CorrectLexdec                   &lt;int&gt; 27, 30, 30, 30, 26, 28, 30, 28, 25, 29…</code></pre>
</div>
</div>
</section>
<section id="model-accuracy" class="slide level2 smaller">
<h2>Model accuracy</h2>
<ul>
<li class="fragment">Accuracy tells us how well our model captures the patterns in the data</li>
<li class="fragment">Model specification is what we <em>believe</em> explains our outcome (y); accuracy tests whether that belief holds up.</li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>A model is <em>accurate</em> if it explains the data better than chance, generalizes well to new data, and captures the main structure of the phenomenon it was designed to represent.</p>
</div>
</div>
</div>
</section>
<section id="quantifying-model-accuracy" class="slide level2 smaller">
<h2>Quantifying model accuracy</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-3-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:40%;">
<ul>
<li class="fragment">We can visualize to get a sense of accuracy</li>
<li class="fragment">But want to <code>quantify</code> accuracy (determine whether model is useful or how it compares to other models)</li>
</ul>
</div></div>
</section>
<section id="quantifying-model-accuracy-1" class="slide level2 smaller">
<h2>Quantifying model accuracy</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-4-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:40%;">
<ul>
<li class="fragment"><strong>sum of squared error</strong> (depends on units, difficult to interpret)</li>
<li class="fragment"><span class="math inline">\(R^2\)</span> (independent of units, easy to interpret)</li>
</ul>
</div></div>
<ul>
<li class="fragment"><span class="math inline">\(R^2\)</span> quantifies the percentage of <strong>variance</strong> in the response variable that is explained by the model.</li>
</ul>
</section>
<section id="coefficient-of-determination-r2" class="slide level2 smaller">
<h2>Coefficient of determination, <span class="math inline">\(R^2\)</span></h2>

<img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-5-1.png" width="960" class="r-stretch"><ul>
<li class="fragment">How much error (variation) is left over in the simplest possible model, <code>RTlexdec ~ 1</code>? This is our <strong>reference model</strong> and represents the <strong>total variance</strong>.</li>
</ul>
</section>
<section id="coefficient-of-determination-r2-1" class="slide level2 smaller">
<h2>Coefficient of determination, <span class="math inline">\(R^2\)</span></h2>

<img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-6-1.png" width="960" class="r-stretch"><ul>
<li class="fragment">How much error (variation) is left over in our specified model, <code>RTlexdec ~ 1 + WrittenFrequency</code>?</li>
</ul>
</section>
<section id="coefficient-of-determination-r2-2" class="slide level2 smaller">
<h2>Coefficient of determination, <span class="math inline">\(R^2\)</span></h2>
<div class="cell quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-7-1.png" width="960"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-7-2.png" width="960"></p>
</div>
</div>
</div>
<div class="fragment">
<p><span class="math inline">\(R^2=100\times(1-\frac{\sum_{i=1}^n (y_i - m_i)^2}{\sum_{i=1}^n (y_i - \overline{y})^2})\)</span></p>
</div>
<div class="fragment">
<p><span class="math inline">\(R^2=100\times(1-\frac{SSE_{model}}{SSE_{reference}})\)</span></p>
</div>
<div class="fragment">
<p><span class="math inline">\(R^2=100\times(1-\frac{unexplained \; variance}{total \; variance})\)</span></p>
</div>
</section>
<section id="coefficient-of-determination-r2-3" class="slide level2 smaller">
<h2>Coefficient of determination, <span class="math inline">\(R^2\)</span></h2>
<div class="cell quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-8-1.png" width="960"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-8-2.png" width="960"></p>
</div>
</div>
</div>
<div class="fragment">
<p>$R^2=100(1-) = 100 = 0.4081037 $</p>
</div>
</section>
<section id="coefficient-of-determination-r2-4" class="slide level2 smaller">
<h2>Coefficient of determination, <span class="math inline">\(R^2\)</span></h2>
<p><span class="math inline">\(R^2=100\times(1-\frac{SSE_{model}}{SSE_{reference}})\)</span></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a><span class="co"># compute R2 from SSEs</span></span>
<span id="cb4-2"><a></a><span class="dv">1</span> <span class="sc">-</span> (sse_model<span class="sc">/</span>sse_ref)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.4081037</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a><span class="co"># compute R2 from lm</span></span>
<span id="cb6-2"><a></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = RTlexdec ~ 1 + WrittenFrequency, data = young_nouns_sample)

Residuals:
     Min       1Q   Median       3Q      Max 
-0.10323 -0.04426 -0.02401  0.03499  0.18496 

Coefficients:
                  Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)       6.590645   0.044550 147.940  &lt; 2e-16 ***
WrittenFrequency -0.028736   0.008157  -3.523  0.00243 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.07984 on 18 degrees of freedom
Multiple R-squared:  0.4081,    Adjusted R-squared:  0.3752 
F-statistic: 12.41 on 1 and 18 DF,  p-value: 0.00243</code></pre>
</div>
</div>
</div>
</section>
<section>
<section id="what-is-adjusted-r2" class="title-slide slide level1 center">
<h1>What is adjusted <span class="math inline">\(R^2\)</span>?</h1>

</section>
<section id="r2-overestimates-model-accuracy" class="slide level2">
<h2><span class="math inline">\(R^2\)</span> overestimates model accuracy</h2>
<p>One thing we can ask is how well the model describes our specific sample of data. But the question we actually want to answer is <em>how well does the model we fit describe the population we are interested in</em>.</p>
<ul>
<li class="fragment">The problem is that we usually only have access to the sample we’ve collected and <span class="math inline">\(R^2\)</span> tends to <strong>overestimate</strong> the accuracy of the model on the population. In other words, the <span class="math inline">\(R^2\)</span> of the model we fit on our sample will be larger than the <span class="math inline">\(R^2\)</span> of the model fit to the population.</li>
<li class="fragment">Further, the population is (usually) unknown to us. To quantify the <strong>true accuracy</strong> of a fitted model – that is, how well the model describes the population, not the sample we collected – we can use a technique called <strong>cross-validation</strong>.</li>
</ul>
</section>
<section id="r2-overestimates-model-accuracy-1" class="slide level2 smaller">
<h2><span class="math inline">\(R^2\)</span> overestimates model accuracy</h2>
<div class="columns">
<div class="column" style="width:67%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-11-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:33%;">
<table class="caption-top">
<thead>
<tr class="header">
<th></th>
<th>Population</th>
<th>Sample</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>True</td>
<td>high</td>
<td></td>
</tr>
<tr class="even">
<td>Fitted</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="r2-overestimates-model-accuracy-2" class="slide level2 smaller">
<h2><span class="math inline">\(R^2\)</span> overestimates model accuracy</h2>
<div class="columns">
<div class="column" style="width:67%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-12-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:33%;">
<table class="caption-top">
<thead>
<tr class="header">
<th></th>
<th>Population</th>
<th>Sample</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>True</td>
<td>high</td>
<td>high</td>
</tr>
<tr class="even">
<td>Fitted</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="r2-overestimates-model-accuracy-3" class="slide level2 smaller">
<h2><span class="math inline">\(R^2\)</span> overestimates model accuracy</h2>
<div class="columns">
<div class="column" style="width:67%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-13-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:33%;">
<table class="caption-top">
<thead>
<tr class="header">
<th></th>
<th>Population</th>
<th>Sample</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>True</td>
<td>high</td>
<td>high</td>
</tr>
<tr class="even">
<td>Fitted</td>
<td>low</td>
<td></td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="r2-overestimates-model-accuracy-4" class="slide level2 smaller">
<h2><span class="math inline">\(R^2\)</span> overestimates model accuracy</h2>
<div class="columns">
<div class="column" style="width:67%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-14-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:33%;">
<table class="caption-top">
<thead>
<tr class="header">
<th></th>
<th>Population</th>
<th>Sample</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>True</td>
<td>high</td>
<td>high</td>
</tr>
<tr class="even">
<td>Fitted</td>
<td>low</td>
<td><code>very high</code></td>
</tr>
</tbody>
</table>
</div></div>
<ul>
<li class="fragment">Accuracy of the fitted model on the sample <code>overestimates true accuracy</code> of fitted model.</li>
</ul>
</section>
<section id="overfitting" class="slide level2 smaller">
<h2>Overfitting</h2>
<p>You have the freedom to fit your sample data better and better (you can add more and more terms, increasing the <span class="math inline">\(R^2\)</span> value). But be careful not to fit the sample data <em>too</em> well.</p>
<ul>
<li class="fragment">any given set of data contains not only the <code>true model</code> (<code>signal</code>), but also random variation (<code>noise</code>).</li>
<li class="fragment">Fitting the sample data too well means we fit not only the signal but also the noise in the data.</li>
<li class="fragment">An overfit model will perform really well on the data it has been trained on (the sample), but would predict new, unseen values poorly.</li>
<li class="fragment">Our goal is to find the <code>optimal fitted model</code> – the one that gets as close to the true model as possible without overfitting.</li>
</ul>
</section>
<section id="overfitting-exercise" class="slide level2">
<h2>Overfitting exercise</h2>
<ul>
<li class="fragment">Let’s use the swim records data to demonstrate that <span class="math inline">\(R^2\)</span> increases as we add more parameters.</li>
</ul>
</section>
<section id="cross-validation-justificaiton" class="slide level2 smaller">
<h2>Cross-validation justificaiton</h2>
<ul>
<li class="fragment">We want to know: <em>how well does the model we fit describe the population we are interested in</em>.</li>
<li class="fragment">But we only have the sample, and <span class="math inline">\(R^2\)</span> on the sample will tend to overestimate the model’s accuracy on the population.</li>
<li class="fragment">To estimate the accuracy of the model on the population, we can use <code>cross-validation</code></li>
</ul>
</section>
<section id="cross-validation-steps" class="slide level2 smaller">
<h2>Cross-validation steps</h2>
<p>Given a sample of data, there are 3 simple steps to any cross-validation technique:</p>
<ol type="1">
<li class="fragment">Leave some data out</li>
<li class="fragment">Fit a model (to the data kept in)</li>
<li class="fragment">Evaluate the model on the left out data (e.g.&nbsp;<span class="math inline">\(R^2\)</span>)</li>
</ol>
<div class="fragment">
<p>There are many ways to do cross-validation — reflecting that there are many ways we can leave some data out — but they all follow this general 3-step process.</p>
</div>
</section>
<section id="two-common-cross-validation-approaches" class="slide level2 smaller">
<h2>Two common cross-validation approaches</h2>
<ul>
<li class="fragment">In <code>leave-one-out cross-validation</code>, we leave out a single data point and use the fitted model to predict that single point. We repeat this process for every data point, then evaluate each model’s prediction on the left out points (we can use <span class="math inline">\(R^2\)</span>!).</li>
<li class="fragment">In <code>k-fold cross-validation</code>, instead of leaving out a single data point, we randomly divide the dataset into <span class="math inline">\(k\)</span> parts and use the fitted model to predict that <em>part</em>. We repeat this process for every part, then evaluate each model’s prediction on the left out parts (again, we can use <span class="math inline">\(R^2\)</span>!).</li>
</ul>
</section>
<section id="leave-one-out-cross-validation" class="slide level2 smaller">
<h2>Leave-one-out cross-validation</h2>

<img data-src="../assests/images/loo13.png" class="r-stretch quarto-figure-center"><p class="caption">Figure borrowed from Kendrick Kay</p></section>
<section id="leave-one-out-cross-validation-1" class="slide level2 smaller">
<h2>Leave-one-out cross-validation</h2>

<img data-src="../assests/images/loo12.png" class="r-stretch quarto-figure-center"><p class="caption">Figure borrowed from Kendrick Kay</p></section>
<section id="leave-one-out-cross-validation-2" class="slide level2 smaller">
<h2>Leave-one-out cross-validation</h2>

<img data-src="../assests/images/loo11.png" class="r-stretch quarto-figure-center"><p class="caption">Figure borrowed from Kendrick Kay</p></section>
<section id="leave-one-out-cross-validation-3" class="slide level2 smaller">
<h2>Leave-one-out cross-validation</h2>

<img data-src="../assests/images/loo10.png" class="r-stretch quarto-figure-center"><p class="caption">Figure borrowed from Kendrick Kay</p></section>
<section id="leave-one-out-cross-validation-4" class="slide level2 smaller">
<h2>Leave-one-out cross-validation</h2>

<img data-src="../assests/images/loo9.png" class="r-stretch quarto-figure-center"><p class="caption">Figure borrowed from Kendrick Kay</p></section>
<section id="leave-one-out-cross-validation-5" class="slide level2 smaller">
<h2>Leave-one-out cross-validation</h2>

<img data-src="../assests/images/loo8.png" class="r-stretch quarto-figure-center"><p class="caption">Figure borrowed from Kendrick Kay</p></section>
<section id="leave-one-out-cross-validation-6" class="slide level2 smaller">
<h2>Leave-one-out cross-validation</h2>

<img data-src="../assests/images/loo7.png" class="r-stretch quarto-figure-center"><p class="caption">Figure borrowed from Kendrick Kay</p></section>
<section id="leave-one-out-cross-validation-7" class="slide level2 smaller">
<h2>Leave-one-out cross-validation</h2>

<img data-src="../assests/images/loo5.png" class="r-stretch quarto-figure-center"><p class="caption">Figure borrowed from Kendrick Kay</p></section>
<section id="leave-one-out-cross-validation-8" class="slide level2 smaller">
<h2>Leave-one-out cross-validation</h2>

<img data-src="../assests/images/loo4.png" class="r-stretch quarto-figure-center"><p class="caption">Figure borrowed from Kendrick Kay</p></section>
<section id="leave-one-out-cross-validation-9" class="slide level2 smaller">
<h2>Leave-one-out cross-validation</h2>

<img data-src="../assests/images/loo3.png" class="r-stretch quarto-figure-center"><p class="caption">Figure borrowed from Kendrick Kay</p></section>
<section id="leave-one-out-cross-validation-10" class="slide level2 smaller">
<h2>Leave-one-out cross-validation</h2>

<img data-src="../assests/images/loo2.png" class="r-stretch quarto-figure-center"><p class="caption">Figure borrowed from Kendrick Kay</p></section>
<section id="leave-one-out-cross-validation-11" class="slide level2 smaller">
<h2>Leave-one-out cross-validation</h2>

<img data-src="../assests/images/loo1.png" class="r-stretch quarto-figure-center"><p class="caption">Figure borrowed from Kendrick Kay</p></section></section>
<section>
<section id="thursday" class="title-slide slide level1 center">
<h1>Thursday</h1>

</section>
<section id="other-methods" class="slide level2">
<h2>Other methods</h2>
<p>There are other ways to evaluate models beyond cross-validaiton. We’ll mention a few more:</p>
<ol type="1">
<li class="fragment"><em>F-test</em></li>
<li class="fragment"><strong>AIC (Akaike Information Criterion)</strong></li>
<li class="fragment"><strong>BIC (Bayesian Information Criterion)</strong></li>
</ol>
</section>
<section id="f-test" class="slide level2 smaller">
<h2>F-test</h2>
<ul>
<li class="fragment">One common way is using an <strong>F-test</strong> to determine whether a more complex model produces a significantly better fit than a simpler one.</li>
<li class="fragment">This approach only applies for <em>nested models</em>, which just means that one model is a simpler version of another more complex one.</li>
<li class="fragment">We will return to this in the demo.</li>
</ul>
</section>
<section id="aic-and-bic" class="slide level2 smaller">
<h2>AIC and BIC</h2>
<ul>
<li class="fragment">You may also encounter <strong>AIC (Akaike Information Criterion)</strong> and <strong>BIC (Bayesian Information Criterion)</strong>.</li>
<li class="fragment">These are parametric approaches that attempt to compare different models and find the optimal fit (helping you avoid overfitting and excessively complex models).</li>
</ul>
</section>
<section id="aic-and-bic-whats-the-difference" class="slide level2 smaller">
<h2>AIC and BIC, what’s the difference?</h2>
<ul>
<li class="fragment">In general AIC considers how well the model fits the data, the number of parameters, and the sample size (there is a penalty for more complex models); BIC is similar but has a stronger penalty for complex models (so will inherently favor simpler models).</li>
</ul>
</section>
<section id="what-well-demo" class="slide level2">
<h2>What we’ll demo:</h2>
<ul>
<li class="fragment"><strong>We’ll focus on cross-validation</strong> in this class, because it makes fewer assumptions than metrics like AIC/BIC and is simpler to understand conceptually. But we’ll also show you the <strong>F-test</strong> approach, since it’s widely used in the sciences.</li>
</ul>
</section>
<section id="f-test-via-anova" class="slide level2">
<h2>F-test (via <code>anova()</code>)</h2>
<p>The F-test is closely related to <span class="math inline">\(R^2\)</span>. When comparing a simpler model to a more complex one, the <strong>change in <span class="math inline">\(R^2\)</span></strong> (often expressed as <span class="math inline">\(\Delta R^2\)</span>) can be evalutated using an F-test to see if adding predictors significantly improves model fit.</p>
</section>
<section id="f-test-and-r2" class="slide level2 smaller">
<h2>F-test and R^2</h2>
<ul>
<li class="fragment">For <span class="math inline">\(R^2\)</span>, when we compared <span class="math inline">\(SSE_{model}\)</span> (the sum of squared error of our model) to <span class="math inline">\(SSE_{reference}\)</span> (the sum of squared error of the intercept-only model), we noted that <span class="math inline">\(SSE_{reference}\)</span> is always going to be greater than <span class="math inline">\(SSE_{model}\)</span>.</li>
<li class="fragment">But what we actually want to know is whether it is <em>significantly</em> greater.</li>
</ul>
</section>
<section id="equation-for-f-in-terms-of-r2" class="slide level2 smaller">
<h2>Equation for F (in terms of <span class="math inline">\(R^2\)</span>)</h2>
<p>Let <span class="math inline">\(R^2_{simple}\)</span> be the <span class="math inline">\(R^2\)</span> of the simpler model and <span class="math inline">\(R^2_{complex}\)</span> be the <span class="math inline">\(R^2\)</span> of the more complex model. The change in <span class="math inline">\(R^2\)</span> (also called <span class="math inline">\(\Delta R^2\)</span>) is:</p>
<ul>
<li class="fragment"><span class="math inline">\(\Delta R^2 = R^2_{complex} - R^2_{simple}\)</span></li>
</ul>
<p>We can then compute the F-statistic to determine if <span class="math inline">\(\Delta R^2\)</span> is significant.</p>
<ul>
<li class="fragment"><span class="math inline">\(F = \frac{\Delta R^2 / p }{(1-R^2_{complex}/(n-k-1))}\)</span></li>
</ul>
<p>Where:</p>
<ul>
<li class="fragment"><span class="math inline">\(p\)</span> is the number of additional predictors in the complex model</li>
<li class="fragment"><span class="math inline">\(n\)</span> is the total sample size</li>
<li class="fragment"><span class="math inline">\(k\)</span> is the number of predictors in the complex model</li>
</ul>
</section>
<section id="understanding-the-f-equation" class="slide level2 smaller">
<h2>Understanding the F equation</h2>
<p><span class="math inline">\(F = \frac{\Delta R^2 / p }{(1-R^2_{complex}/(n-k-1))}\)</span></p>
<p>We can understand the numerator and denominator of this equation in the following way:</p>
<ul>
<li class="fragment">The numerator represents the increase in <em>explained variance</em> per additional predictor.</li>
<li class="fragment">The denominator represents the remaining <em>unexplained variance</em>, adjusted for sample size and the complexity of the model.</li>
</ul>
</section>
<section id="f-test-demo" class="slide level2 smaller">
<h2>F-test demo</h2>
<p>In R, we can perform this model comparison via and F-test via a call to <code>anova()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a>model_int <span class="ot">&lt;-</span> <span class="fu">lm</span>(RTlexdec <span class="sc">~</span> <span class="dv">1</span>, english)</span>
<span id="cb8-2"><a></a>model_freq <span class="ot">&lt;-</span> <span class="fu">lm</span>(RTlexdec <span class="sc">~</span> WrittenFrequency, english)</span>
<span id="cb8-3"><a></a>model_freqage <span class="ot">&lt;-</span> <span class="fu">lm</span>(RTlexdec <span class="sc">~</span> WrittenFrequency <span class="sc">+</span> AgeSubject, english)</span>
<span id="cb8-4"><a></a>model_freqagelength <span class="ot">&lt;-</span> <span class="fu">lm</span>(RTlexdec <span class="sc">~</span> WrittenFrequency <span class="sc">+</span> AgeSubject <span class="sc">+</span> LengthInLetters, english)</span>
<span id="cb8-5"><a></a></span>
<span id="cb8-6"><a></a><span class="fu">anova</span>(model_int, model_freq, model_freqage, model_freqagelength)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Model 1: RTlexdec ~ 1
Model 2: RTlexdec ~ WrittenFrequency
Model 3: RTlexdec ~ WrittenFrequency + AgeSubject
Model 4: RTlexdec ~ WrittenFrequency + AgeSubject + LengthInLetters
  Res.Df     RSS Df Sum of Sq         F  Pr(&gt;F)    
1   4567 112.456                                   
2   4566  91.194  1    21.261 2772.1326 &lt; 2e-16 ***
3   4565  35.053  1    56.141 7319.9087 &lt; 2e-16 ***
4   4564  35.004  1     0.049    6.3563 0.01173 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
</section>
<section id="f-test-interpretation" class="slide level2 smaller">
<h2>F-test interpretation</h2>
<p>If the F-statistic is large, it suggests that the additional predictors in the complex model significantly improve model fit.</p>
<p>To help you decide, <code>anova()</code> returns a p-value. You can understand this p-value as asking: <strong>how likely it is to observe this value of F if we randomly added this many predictors to our model?</strong></p>
</section>
<section id="back-to-model-selection" class="slide level2 smaller">
<h2>Back to model selection</h2>
<ul>
<li class="fragment"><p>Building models is itself an iterative process: we can use model accuracy obtained via cross-validation to determine which model to select (as a way to find the elusive optimal model fit).</p></li>
<li class="fragment"><p>Beyond model accuracy, there are other practical things one might want to consider when selecting a model, such as ease of interpretation and availability of resources (the data you can collect, the computing power you have, etc.)</p></li>
</ul>
</section>
<section id="announcements" class="slide level2 smaller">
<h2>Announcements</h2>
<ul>
<li class="fragment">No pset 05 (due to off week!); pset 06 will have a few extra challenge questions in case you want them</li>
<li class="fragment">pset 04 solutions posted tomorrow morning! (turn it in if you haven’t!)</li>
<li class="fragment">Practice exam 02 posted by Friday at midnight!</li>
</ul>
</section>
<section id="you-are-here-1" class="slide level2 smaller">
<h2>You are <code>here</code></h2>
<div class="columns">
<div class="column" style="width:33%;">
<h5 id="data-science-with-r-1">Data science with R</h5>
<ul>
<li>Hello, world!</li>
<li>R basics</li>
<li>Data visualization</li>
<li>Data wrangling</li>
</ul>
</div><div class="column" style="width:33%;">
<h5 id="stats-model-buidling-1">Stats &amp; Model buidling</h5>
<ul>
<li>Sampling distribution</li>
<li>Hypothesis testing</li>
<li>Model specification</li>
<li>Model fitting</li>
<li>Model accuracy</li>
<li><code>Model reliability</code></li>
</ul>
</div><div class="column" style="width:33%;">
<h5 id="more-advanced-1">More advanced</h5>
<ul>
<li>Classification</li>
<li>Inference for regression</li>
<li>Mixed-effect models</li>
</ul>
</div></div>
</section>
<section id="model-building-overview-1" class="slide level2 smaller">
<h2>Model building overview</h2>
<ul>
<li class="fragment"><strong>Model specification</strong>: what is the form?</li>
<li class="fragment"><strong>Model fitting</strong>: you have the form, how do you guess the free parameters?</li>
<li class="fragment"><strong>Model accuracy</strong>: you’ve estimated the parameters, how well does that model describe your data?</li>
<li class="fragment"><code>Model reliability</code>: when you estimate the parameters, there is some uncertainty on them</li>
</ul>
</section></section>
<section>
<section id="dataset-1" class="title-slide slide level1 center">
<h1>Dataset</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a>data_n10 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"http://kschuler.github.io/datasets/model-reliability-sample10.csv"</span>) </span>
<span id="cb10-2"><a></a>data_n200 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"http://kschuler.github.io/datasets/model-reliability-sample200.csv"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section" class="slide level2 smaller">
<h2></h2>
<div class="columns">
<div class="column" style="width:50%;">
<h4 id="explore-the-data">Explore the data</h4>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-17-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<h5 id="specify-a-model">Specify a model</h5>
<ul>
<li class="fragment">supervised learning | regression | linear</li>
<li class="fragment"><code>y ~ x</code></li>
<li class="fragment"><span class="math inline">\(y=w_0+w_1x_1\)</span></li>
</ul>
</div></div>
<div class="columns">
<div class="column" style="width:50%;">
<h5 id="fit-the-model">Fit the model</h5>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-18-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<h5 id="specify-and-fit-with-infer">Specify and fit with <code>infer</code></h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a>data_n10 <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a></a>  <span class="fu">specify</span>(y <span class="sc">~</span> x) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a></a>  <span class="fu">fit</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  term      estimate
  &lt;chr&gt;        &lt;dbl&gt;
1 intercept    1.75 
2 x            0.733</code></pre>
</div>
</div>
</div></div>
</section>
<section id="model-reliability-asks" class="slide level2 smaller">
<h2>Model reliability asks:</h2>
<p>How certain can we be about the parameter estimates we obtained?</p>
<div class="cell columns column-output-location">
<div class="column">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a>observed_fit <span class="ot">&lt;-</span> data_n10 <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a></a>  <span class="fu">specify</span>(y <span class="sc">~</span> x) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a></a>  <span class="fu">fit</span>()</span>
<span id="cb13-4"><a></a></span>
<span id="cb13-5"><a></a>observed_fit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column fragment">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  term      estimate
  &lt;chr&gt;        &lt;dbl&gt;
1 intercept    1.75 
2 x            0.733</code></pre>
</div>
</div></div>
<div class="fragment">
<p>But… why is there uncertainty around the parameter estimates at all?</p>
</div>
</section>
<section id="because-of-sampling-error" class="slide level2 smaller">
<h2>Because of sampling error</h2>
<p>We are interested in the model parameters that best describe the <em>population from which the sample was drawn</em> (not a given sample)</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-21-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-22-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
<ul>
<li class="fragment">Due to <em>sampling error</em>, we can expect some variability in the model parameters that describe a sample of data.</li>
</ul>
</section>
<section id="model-reliability" class="slide level2 smaller">
<h2>Model reliability</h2>
<ul>
<li class="fragment">We can think of model reliability as the <em>stability</em> of the parameters of a fitted model.</li>
<li class="fragment">The more data we collect, the more reliable the model parameters will be.</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-23-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-24-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="section-1" class="slide level2 smaller">
<h2></h2>
<h3 id="confidence-intervals-via-bootstrapping">Confidence intervals via bootstrapping</h3>
<p>We can obtain confidence intervals around parameter estimates for models in the same we we did for point estimates like the mean: <strong>bootstrapping</strong></p>
<ol type="1">
<li class="fragment">Draw bootstrap samples from the observed data</li>
<li class="fragment">Fit the model of interest to each bootstrapped sample</li>
<li class="fragment">Construct the sampling distribution of parameter estimates across bootstraps</li>
</ol>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-25-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-26-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="section-2" class="slide level2 smaller">
<h2></h2>
<h3 id="the-more-data-we-collect-the-more-reliable">The more data we collect, the more reliable</h3>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-27-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-28-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-29-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-30-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="section-3" class="slide level2 smaller">
<h2></h2>
<h3 id="the-more-data-we-collect-the-more-reliable-1">The more data we collect, the more reliable</h3>
<div class="cell quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-31-1.png" width="960"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-31-2.png" width="960"></p>
</div>
</div>
</div>
</section>
<section id="section-4" class="slide level2 smaller">
<h2></h2>
<h3 id="confidence-intervals-with-infer">Confidence intervals with <code>infer</code></h3>
<div class="columns">
<div class="column" style="width:33%;">
<p>Fit bootstraps</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a>boot_fits <span class="ot">&lt;-</span> data_n200 <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a></a>  <span class="fu">specify</span>(y <span class="sc">~</span> x) <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a></a>  <span class="fu">generate</span>(</span>
<span id="cb15-4"><a></a>    <span class="at">reps =</span> <span class="dv">1000</span>, </span>
<span id="cb15-5"><a></a>    <span class="at">type =</span> <span class="st">"bootstrap"</span></span>
<span id="cb15-6"><a></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb15-7"><a></a>  <span class="fu">fit</span>()</span>
<span id="cb15-8"><a></a></span>
<span id="cb15-9"><a></a><span class="fu">head</span>(boot_fits)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
# Groups:   replicate [3]
  replicate term      estimate
      &lt;int&gt; &lt;chr&gt;        &lt;dbl&gt;
1         1 intercept    1.84 
2         1 x            0.485
3         2 intercept    1.95 
4         2 x            0.585
5         3 intercept    1.82 
6         3 x            0.332</code></pre>
</div>
</div>
</div><div class="column" style="width:33%;">
<p>Get confidence interval</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a>ci <span class="ot">&lt;-</span> boot_fits <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a></a>  <span class="fu">get_confidence_interval</span>(</span>
<span id="cb17-3"><a></a>    <span class="at">point_estimate =</span> observed_fit_200, </span>
<span id="cb17-4"><a></a>    <span class="at">level =</span> <span class="fl">0.95</span></span>
<span id="cb17-5"><a></a>  )</span>
<span id="cb17-6"><a></a></span>
<span id="cb17-7"><a></a>ci </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  term      lower_ci upper_ci
  &lt;chr&gt;        &lt;dbl&gt;    &lt;dbl&gt;
1 intercept    1.78     2.06 
2 x            0.362    0.634</code></pre>
</div>
</div>
</div><div class="column" style="width:33%;">
<p>Visualize distribution &amp; ci</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a>bootstrapped_fits <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a></a>  <span class="fu">visualize</span>() <span class="sc">+</span></span>
<span id="cb19-3"><a></a>  <span class="fu">shade_ci</span>(<span class="at">endpoints =</span> ci) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="model-evaluation_files/figure-revealjs/unnamed-chunk-34-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="accuracy-v.-reliability" class="slide level2">
<h2>Accuracy v. Reliability</h2>
<p>Model acuracy and model reliability are closely related concepts in model building, but they aren’t the same.</p>
<ul>
<li class="fragment"><strong>Accuracy</strong> refers to how close a model’s predictions are to the true values we want to predict.</li>
<li class="fragment"><strong>Reliability</strong>, is about the model’s stability—how consistent the model’s parameters and outputs are when new data is sampled.</li>
</ul>
</section>
<section id="accuracy-v.-reliability-1" class="slide level2 smaller">
<h2>Accuracy v. Reliability</h2>

<img data-src="../assests/images/accuracy-reliability.png" class="r-stretch"><ol type="1">
<li class="fragment"><strong>Reliable and accurate</strong>: The model is both close to the true model and stable across different samples. This is the ideal case, indicating we have enough data to produce both a precise and consistent model fit.</li>
</ol>
</section>
<section id="accuracy-v.-reliability-2" class="slide level2 smaller">
<h2>Accuracy v. Reliability</h2>

<img data-src="../assests/images/accuracy-reliability.png" class="r-stretch"><ol start="2" type="1">
<li class="fragment"><strong>Reliable but inaccurate</strong>: The model parameters are stable across samples, meaning it’s reliable, but it’s far from the true model. This could happen if our model is structurally limited or misses some aspect of the data, even if we have plenty of data for stable estimates.</li>
</ol>
</section>
<section id="accuracy-v.-reliability-3" class="slide level2 smaller">
<h2>Accuracy v. Reliability</h2>

<img data-src="../assests/images/accuracy-reliability.png" class="r-stretch"><ol start="3" type="1">
<li class="fragment"><strong>Unreliable but accurate</strong>: This situation is unlikely. Without enough data, the model’s predictions will fluctuate widely from sample to sample, making it hard to consistently approximate the true model. So, without reliability, achieving accuracy is improbable.</li>
</ol>
</section>
<section id="accuracy-v.-reliability-4" class="slide level2 smaller">
<h2>Accuracy v. Reliability</h2>

<img data-src="../assests/images/accuracy-reliability.png" class="r-stretch"><ol start="4" type="1">
<li class="fragment"><strong>Unreliable and inaccurate</strong>: Here, the model’s estimates are unstable and far from the true model. This could be due to either insufficient data or an inappropriate model choice that doesn’t match the data’s structure. With limited data, it’s hard to tell which factor is to blame.</li>
</ol>
</section>
<section id="accuracy-v.-reliability-5" class="slide level2 smaller">
<h2>Accuracy v. Reliability</h2>



<img data-src="../assests/images/accuracy-reliability.png" class="r-stretch"></section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p><a href="../index.html">https://kschuler.github.io/datasci-langmind/</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>